<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Kullanıcı Profili ve Resim - Django-Tutorials</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../00_Django/index.html"><strong aria-hidden="true">1.</strong> Django</a></li><li class="chapter-item expanded "><a href="../01_Getting_Started/index.html"><strong aria-hidden="true">2.</strong> Başlarken</a></li><li class="chapter-item expanded "><a href="../02_Applications_and_Routes/index.html"><strong aria-hidden="true">3.</strong> Uygulamalar ve Yönlendirmeler</a></li><li class="chapter-item expanded "><a href="../03_Templates/index.html"><strong aria-hidden="true">4.</strong> Şablonlar</a></li><li class="chapter-item expanded "><a href="../04_Admin_Page/index.html"><strong aria-hidden="true">5.</strong> Yönetim Sayfası</a></li><li class="chapter-item expanded "><a href="../05_Database_and_Migrations/index.html"><strong aria-hidden="true">6.</strong> Veritabanı ve Göçler</a></li><li class="chapter-item expanded "><a href="../06_User_Registration/index.html"><strong aria-hidden="true">7.</strong> Kullanıcı Kaydı</a></li><li class="chapter-item expanded "><a href="../07_Login_and_Logout_System/index.html"><strong aria-hidden="true">8.</strong> Giriş ve Çıkış Sistemi</a></li><li class="chapter-item expanded "><a href="../08_User_Profile_and_Picture/index.html" class="active"><strong aria-hidden="true">9.</strong> Kullanıcı Profili ve Resim</a></li><li class="chapter-item expanded "><a href="../09_Update_User_Profile/index.html"><strong aria-hidden="true">10.</strong> Kullanıcı Profilini Güncelleme</a></li><li class="chapter-item expanded "><a href="../10_Create_Update_and_Delete_Posts/index.html"><strong aria-hidden="true">11.</strong> Gönderi Oluşturma, Güncelleme ve Silme</a></li><li class="chapter-item expanded "><a href="../11_Pagination/index.html"><strong aria-hidden="true">12.</strong> Sayfalandırma</a></li><li class="chapter-item expanded "><a href="../12_Email_and_Password_Reset/index.html"><strong aria-hidden="true">13.</strong> E-posta ve Şifre Sıfırlama</a></li><li class="chapter-item expanded "><a href="../13_Custom_Domain/index.html"><strong aria-hidden="true">14.</strong> Uygulamamız için Özel Alan Adı Nasıl Kullanılır</a></li><li class="chapter-item expanded "><a href="../14_SSL-TLS_CertificateEncrypt/index.html"><strong aria-hidden="true">15.</strong> Encrypt kullanarak ücretsiz bir SSL/TLS Sertifikası ile HTTPS nasıl etkinleştirilir</a></li><li class="chapter-item expanded "><a href="../15_AWS_S3_File_Uploads/index.html"><strong aria-hidden="true">16.</strong> Dosya Yüklemeleri için AWS S3 Kullanımı</a></li><li class="chapter-item expanded "><a href="../16_Deploy_to_a_Linux_Server/index.html"><strong aria-hidden="true">17.</strong> Uygulamanızı Dağıtma - Bir Linux Sunucusuna Dağıtın</a></li><li class="chapter-item expanded "><a href="../17_Deploy_using_Heroku/index.html"><strong aria-hidden="true">18.</strong> Uygulamanızı Dağıtma - Heroku kullanarak Dağıtın</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Django-Tutorials</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="kullanıcı-profili-ve-resim"><a class="header" href="#kullanıcı-profili-ve-resim">Kullanıcı Profili ve Resim</a></h1>
<p>Bu bölümde, kullanıcı profil sayfamızı geliştirerek kullanıcıların profil resmi yükleme yeteneğini ekleyeceğiz. Bu eğitim, mevcut kullanıcı modelini ek alanlarla genişletmeyi ve belirli işlemlerden sonra belirli işlevleri yürütmek için Django sinyallerini kullanmayı öğretecek. Bu tür işlevsellik, sağlam ve kullanıcı dostu bir web uygulaması oluşturmak için gereklidir.</p>
<h2 id="kullanıcı-modelinin-genişletilmesi"><a class="header" href="#kullanıcı-modelinin-genişletilmesi">Kullanıcı Modelinin Genişletilmesi</a></h2>
<p>Başlangıç olarak, profil resmi gibi ek alanları barındırmak için mevcut kullanıcı modelini genişletmemiz gerekiyor. Django'da bunu başarmak için iki yaygın yaklaşım vardır: özel bir Profil modeli ile Bir-Bir Bağlantı kullanmak veya yerleşik <code>User</code> modelini doğrudan genişletmek. Bu eğitimde, Bir-Bir Bağlantı yöntemini kullanacağız.</p>
<h3 id="adım-1-profil-modeli-oluşturma"><a class="header" href="#adım-1-profil-modeli-oluşturma">Adım 1: Profil Modeli Oluşturma</a></h3>
<p>İlk olarak, kullanıcı profillerini yönetmek için <code>profiles</code> adında yeni bir uygulama oluşturun. Terminalinizde şu komutu çalıştırın:</p>
<pre><code class="language-bash">python manage.py startapp profiles
</code></pre>
<p>Ardından, <code>profiles/models.py</code> dosyasında <code>Profile</code> modelini tanımlayın:</p>
<pre><code class="language-python">from django.db import models
from django.contrib.auth.models import User
from PIL import Image

class Profile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    image = models.ImageField(default='default.jpg', upload_to='profile_pics')

    def __str__(self):
        return f'{self.user.username} Profile'

    def save(self, *args, **kwargs):
        super().save(*args, **kwargs)
        img = Image.open(self.image.path)

        if img.height &gt; 300 or img.width &gt; 300:
            output_size = (300, 300)
            img.thumbnail(output_size)
            img.save(self.image.path)
</code></pre>
<h3 id="adım-2-profilleri-otomatik-olarak-oluşturmak-ve-kaydetmek-İçin-bir-sinyal-oluşturma"><a class="header" href="#adım-2-profilleri-otomatik-olarak-oluşturmak-ve-kaydetmek-İçin-bir-sinyal-oluşturma">Adım 2: Profilleri Otomatik Olarak Oluşturmak ve Kaydetmek İçin Bir Sinyal Oluşturma</a></h3>
<p>Yeni bir <code>User</code> oluşturulduğunda bir <code>Profile</code> nesnesinin oluşturulmasını sağlamak için Django sinyallerini kullanabiliriz. Bu, <code>profiles/signals.py</code> dosyasında bir sinyal tanımlanarak gerçekleştirilebilir:</p>
<pre><code class="language-python">from django.db.models.signals import post_save
from django.contrib.auth.models import User
from django.dispatch import receiver
from .models import Profile

@receiver(post_save, sender=User)
def create_profile(sender, instance, created, **kwargs):
    if created:
        Profile.objects.create(user=instance)

@receiver(post_save, sender=User)
def save_profile(sender, instance, **kwargs):
    instance.profile.save()
</code></pre>
<p>Bu sinyalin uygulama hazır olduğunda kaydedildiğinden emin olmak için <code>profiles/apps.py</code> dosyasında bu sinyali içe aktarın:</p>
<pre><code class="language-python">from django.apps import AppConfig

class ProfilesConfig(AppConfig):
    name = 'profiles'

    def ready(self):
        import profiles.signals
</code></pre>
<p><code>settings.py</code> dosyasında <code>INSTALLED_APPS</code> bölümünü <code>profiles</code> uygulamasını içerecek şekilde güncellediğinizden emin olun:</p>
<pre><code class="language-python">INSTALLED_APPS = [
    ...
    'profiles.apps.ProfilesConfig',
    ...
]
</code></pre>
<h3 id="adım-3-kullanıcı-kaydını-profil-oluşturmayı-ele-alacak-Şekilde-güncelleme"><a class="header" href="#adım-3-kullanıcı-kaydını-profil-oluşturmayı-ele-alacak-Şekilde-güncelleme">Adım 3: Kullanıcı Kaydını Profil Oluşturmayı Ele Alacak Şekilde Güncelleme</a></h3>
<p>Yeni bir kullanıcı kaydederken, bir profilin de oluşturulduğundan emin olun. Kayıt formunuzu ve görünümünüzü buna göre güncelleyin. <code>users/forms.py</code> dosyasında bir profil güncelleme formu oluşturun:</p>
<pre><code class="language-python">from django import forms
from django.contrib.auth.models import User
from django.contrib.auth.forms import UserCreationForm
from profiles.models import Profile

class UserRegisterForm(UserCreationForm):
    email = forms.EmailField()

    class Meta:
        model = User
        fields = ['username', 'email', 'password1', 'password2']

class UserUpdateForm(forms.ModelForm):
    email = forms.EmailField()

    class Meta:
        model = User
        fields = ['username', 'email']

class ProfileUpdateForm(forms.ModelForm):
    class Meta:
        model = Profile
        fields = ['image']
</code></pre>
<p>Profil güncellemelerini ele almak için <code>users/views.py</code> dosyasındaki görünümü güncelleyin:</p>
<pre><code class="language-python">from django.shortcuts import render, redirect
from django.contrib import messages
from django.contrib.auth.decorators import login_required
from .forms import UserRegisterForm, UserUpdateForm, ProfileUpdateForm

def register(request):
    if request.method == 'POST':
        form = UserRegisterForm(request.POST)
        if form.is_valid():
            form.save()
            username = form.cleaned_data.get('username')
            messages.success(request, f'Your account has been created! You are now able to log in')
            return redirect('login')
    else:
        form = UserRegisterForm()
    return render(request, 'users/register.html', {'form': form})

@login_required
def profile(request):
    if request.method == 'POST':
        u_form = UserUpdateForm(request.POST, instance=request.user)
        p_form = ProfileUpdateForm(request.POST, request.FILES, instance=request.user.profile)
        if u_form.is_valid() and p_form.is_valid():
            u_form.save()
            p_form.save()
            messages.success(request, f'Your account has been updated!')
            return redirect('profile')
    else:
        u_form = UserUpdateForm(instance=request.user)
        p_form = ProfileUpdateForm(instance=request.user.profile)

    context = {
        'u_form': u_form,
        'p_form': p_form
    }

    return render(request, 'users/profile.html', context)
</code></pre>
<h3 id="adım-4-profil-yönetimi-İçin-Şablonlar-oluşturma"><a class="header" href="#adım-4-profil-yönetimi-İçin-Şablonlar-oluşturma">Adım 4: Profil Yönetimi İçin Şablonlar Oluşturma</a></h3>
<p>Kullanıcı kaydı ve profil güncellemelerini ele almak için şablonlar oluşturun. <code>templates/users/register.html</code> dosyasında:</p>
<pre><code class="language-html">{% extends "base_generic.html" %}
{% block content %}
  &lt;div class="container mt-5"&gt;
    &lt;h2&gt;Register&lt;/h2&gt;
    &lt;form method="POST"&gt;
      {% csrf_token %}
      {{ form|crispy }}
      &lt;button type="submit" class="btn btn-primary"&gt;Register&lt;/button&gt;
    &lt;/form&gt;
  &lt;/div&gt;
{% endblock %}
</code></pre>
<p><code>templates/users/profile.html</code> dosyasında:</p>
<pre><code class="language-html">{% extends "base_generic.html" %}
{% block content %}
  &lt;div class="container mt-5"&gt;
    &lt;h2&gt;Profile&lt;/h2&gt;
    &lt;form method="POST" enctype="multipart/form-data"&gt;
      {% csrf_token %}
      {{ u_form|crispy }}
      {{ p_form|crispy }}
      &lt;button type="submit" class="btn btn-primary"&gt;Update&lt;/button&gt;
    &lt;/form&gt;
  &lt;/div&gt;
{% endblock %}
</code></pre>
<h3 id="sonuç"><a class="header" href="#sonuç">Sonuç</a></h3>
<p>Yukarıda belirtilen adımları izleyerek, kullanıcıların profil resimlerini yükleyip yönetebileceği bir işlevselliği Django uygulamanıza başarıyla eklediniz. Bu, bir-bir ilişkiyle kullanıcı modelini genişletmeyi, otomatik profil oluşturma için Django sinyallerini kullanmayı ve kullanıcı etkileşimi için form ve görünümler sağlamayı içerir. Bu eğitim, kullanıcı deneyimini geliştiren ve uygulamanızın bütünlüğünü koruyan sağlam özellikler oluşturmayı göstermektedir.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../07_Login_and_Logout_System/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../09_Update_User_Profile/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../07_Login_and_Logout_System/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../09_Update_User_Profile/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
